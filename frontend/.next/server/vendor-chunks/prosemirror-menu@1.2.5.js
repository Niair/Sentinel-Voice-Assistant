"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/prosemirror-menu@1.2.5";
exports.ids = ["vendor-chunks/prosemirror-menu@1.2.5"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/prosemirror-menu@1.2.5/node_modules/prosemirror-menu/dist/index.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/.pnpm/prosemirror-menu@1.2.5/node_modules/prosemirror-menu/dist/index.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Dropdown: () => (/* binding */ Dropdown),\n/* harmony export */   DropdownSubmenu: () => (/* binding */ DropdownSubmenu),\n/* harmony export */   MenuItem: () => (/* binding */ MenuItem),\n/* harmony export */   blockTypeItem: () => (/* binding */ blockTypeItem),\n/* harmony export */   icons: () => (/* binding */ icons),\n/* harmony export */   joinUpItem: () => (/* binding */ joinUpItem),\n/* harmony export */   liftItem: () => (/* binding */ liftItem),\n/* harmony export */   menuBar: () => (/* binding */ menuBar),\n/* harmony export */   redoItem: () => (/* binding */ redoItem),\n/* harmony export */   renderGrouped: () => (/* binding */ renderGrouped),\n/* harmony export */   selectParentNodeItem: () => (/* binding */ selectParentNodeItem),\n/* harmony export */   undoItem: () => (/* binding */ undoItem),\n/* harmony export */   wrapItem: () => (/* binding */ wrapItem)\n/* harmony export */ });\n/* harmony import */ var crelt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crelt */ \"(ssr)/./node_modules/.pnpm/crelt@1.0.6/node_modules/crelt/index.js\");\n/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-commands */ \"(ssr)/./node_modules/.pnpm/prosemirror-commands@1.7.1/node_modules/prosemirror-commands/dist/index.js\");\n/* harmony import */ var prosemirror_history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-history */ \"(ssr)/./node_modules/.pnpm/prosemirror-history@1.5.0/node_modules/prosemirror-history/dist/index.js\");\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prosemirror-state */ \"(ssr)/./node_modules/.pnpm/prosemirror-state@1.4.4/node_modules/prosemirror-state/dist/index.js\");\n\n\n\n\nconst SVG = \"http://www.w3.org/2000/svg\";\nconst XLINK = \"http://www.w3.org/1999/xlink\";\nconst prefix$2 = \"ProseMirror-icon\";\nfunction hashPath(path) {\n    let hash = 0;\n    for(let i = 0; i < path.length; i++)hash = (hash << 5) - hash + path.charCodeAt(i) | 0;\n    return hash;\n}\nfunction getIcon(root, icon) {\n    let doc = (root.nodeType == 9 ? root : root.ownerDocument) || document;\n    let node = doc.createElement(\"div\");\n    node.className = prefix$2;\n    if (icon.path) {\n        let { path, width, height } = icon;\n        let name = \"pm-icon-\" + hashPath(path).toString(16);\n        if (!doc.getElementById(name)) buildSVG(root, name, icon);\n        let svg = node.appendChild(doc.createElementNS(SVG, \"svg\"));\n        svg.style.width = width / height + \"em\";\n        let use = svg.appendChild(doc.createElementNS(SVG, \"use\"));\n        use.setAttributeNS(XLINK, \"href\", /([^#]*)/.exec(doc.location.toString())[1] + \"#\" + name);\n    } else if (icon.dom) {\n        node.appendChild(icon.dom.cloneNode(true));\n    } else {\n        let { text, css } = icon;\n        node.appendChild(doc.createElement(\"span\")).textContent = text || \"\";\n        if (css) node.firstChild.style.cssText = css;\n    }\n    return node;\n}\nfunction buildSVG(root, name, data) {\n    let [doc, top] = root.nodeType == 9 ? [\n        root,\n        root.body\n    ] : [\n        root.ownerDocument || document,\n        root\n    ];\n    let collection = doc.getElementById(prefix$2 + \"-collection\");\n    if (!collection) {\n        collection = doc.createElementNS(SVG, \"svg\");\n        collection.id = prefix$2 + \"-collection\";\n        collection.style.display = \"none\";\n        top.insertBefore(collection, top.firstChild);\n    }\n    let sym = doc.createElementNS(SVG, \"symbol\");\n    sym.id = name;\n    sym.setAttribute(\"viewBox\", \"0 0 \" + data.width + \" \" + data.height);\n    let path = sym.appendChild(doc.createElementNS(SVG, \"path\"));\n    path.setAttribute(\"d\", data.path);\n    collection.appendChild(sym);\n}\nconst prefix$1 = \"ProseMirror-menu\";\n/**\nAn icon or label that, when clicked, executes a command.\n*/ class MenuItem {\n    /**\n    Create a menu item.\n    */ constructor(/**\n    The spec used to create this item.\n    */ spec){\n        this.spec = spec;\n    }\n    /**\n    Renders the icon according to its [display\n    spec](https://prosemirror.net/docs/ref/#menu.MenuItemSpec.display), and adds an event handler which\n    executes the command when the representation is clicked.\n    */ render(view) {\n        let spec = this.spec;\n        let dom = spec.render ? spec.render(view) : spec.icon ? getIcon(view.root, spec.icon) : spec.label ? (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", null, translate(view, spec.label)) : null;\n        if (!dom) throw new RangeError(\"MenuItem without icon or label property\");\n        if (spec.title) {\n            const title = typeof spec.title === \"function\" ? spec.title(view.state) : spec.title;\n            dom.setAttribute(\"title\", translate(view, title));\n        }\n        if (spec.class) dom.classList.add(spec.class);\n        if (spec.css) dom.style.cssText += spec.css;\n        dom.addEventListener(\"mousedown\", (e)=>{\n            e.preventDefault();\n            if (!dom.classList.contains(prefix$1 + \"-disabled\")) spec.run(view.state, view.dispatch, view, e);\n        });\n        function update(state) {\n            if (spec.select) {\n                let selected = spec.select(state);\n                dom.style.display = selected ? \"\" : \"none\";\n                if (!selected) return false;\n            }\n            let enabled = true;\n            if (spec.enable) {\n                enabled = spec.enable(state) || false;\n                setClass(dom, prefix$1 + \"-disabled\", !enabled);\n            }\n            if (spec.active) {\n                let active = enabled && spec.active(state) || false;\n                setClass(dom, prefix$1 + \"-active\", active);\n            }\n            return true;\n        }\n        return {\n            dom,\n            update\n        };\n    }\n}\nfunction translate(view, text) {\n    return view._props.translate ? view._props.translate(text) : text;\n}\nlet lastMenuEvent = {\n    time: 0,\n    node: null\n};\nfunction markMenuEvent(e) {\n    lastMenuEvent.time = Date.now();\n    lastMenuEvent.node = e.target;\n}\nfunction isMenuEvent(wrapper) {\n    return Date.now() - 100 < lastMenuEvent.time && lastMenuEvent.node && wrapper.contains(lastMenuEvent.node);\n}\n/**\nA drop-down menu, displayed as a label with a downwards-pointing\ntriangle to the right of it.\n*/ class Dropdown {\n    /**\n    Create a dropdown wrapping the elements.\n    */ constructor(content, /**\n    @internal\n    */ options = {}){\n        this.options = options;\n        this.options = options || {};\n        this.content = Array.isArray(content) ? content : [\n            content\n        ];\n    }\n    /**\n    Render the dropdown menu and sub-items.\n    */ render(view) {\n        let content = renderDropdownItems(this.content, view);\n        let win = view.dom.ownerDocument.defaultView || window;\n        let label = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix$1 + \"-dropdown \" + (this.options.class || \"\"),\n            style: this.options.css\n        }, translate(view, this.options.label || \"\"));\n        if (this.options.title) label.setAttribute(\"title\", translate(view, this.options.title));\n        let wrap = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix$1 + \"-dropdown-wrap\"\n        }, label);\n        let open = null;\n        let listeningOnClose = null;\n        let close = ()=>{\n            if (open && open.close()) {\n                open = null;\n                win.removeEventListener(\"mousedown\", listeningOnClose);\n            }\n        };\n        label.addEventListener(\"mousedown\", (e)=>{\n            e.preventDefault();\n            markMenuEvent(e);\n            if (open) {\n                close();\n            } else {\n                open = this.expand(wrap, content.dom);\n                win.addEventListener(\"mousedown\", listeningOnClose = ()=>{\n                    if (!isMenuEvent(wrap)) close();\n                });\n            }\n        });\n        function update(state) {\n            let inner = content.update(state);\n            wrap.style.display = inner ? \"\" : \"none\";\n            return inner;\n        }\n        return {\n            dom: wrap,\n            update\n        };\n    }\n    /**\n    @internal\n    */ expand(dom, items) {\n        let menuDOM = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix$1 + \"-dropdown-menu \" + (this.options.class || \"\")\n        }, items);\n        let done = false;\n        function close() {\n            if (done) return false;\n            done = true;\n            dom.removeChild(menuDOM);\n            return true;\n        }\n        dom.appendChild(menuDOM);\n        return {\n            close,\n            node: menuDOM\n        };\n    }\n}\nfunction renderDropdownItems(items, view) {\n    let rendered = [], updates = [];\n    for(let i = 0; i < items.length; i++){\n        let { dom, update } = items[i].render(view);\n        rendered.push((0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix$1 + \"-dropdown-item\"\n        }, dom));\n        updates.push(update);\n    }\n    return {\n        dom: rendered,\n        update: combineUpdates(updates, rendered)\n    };\n}\nfunction combineUpdates(updates, nodes) {\n    return (state)=>{\n        let something = false;\n        for(let i = 0; i < updates.length; i++){\n            let up = updates[i](state);\n            nodes[i].style.display = up ? \"\" : \"none\";\n            if (up) something = true;\n        }\n        return something;\n    };\n}\n/**\nRepresents a submenu wrapping a group of elements that start\nhidden and expand to the right when hovered over or tapped.\n*/ class DropdownSubmenu {\n    /**\n    Creates a submenu for the given group of menu elements. The\n    following options are recognized:\n    */ constructor(content, /**\n    @internal\n    */ options = {}){\n        this.options = options;\n        this.content = Array.isArray(content) ? content : [\n            content\n        ];\n    }\n    /**\n    Renders the submenu.\n    */ render(view) {\n        let items = renderDropdownItems(this.content, view);\n        let win = view.dom.ownerDocument.defaultView || window;\n        let label = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix$1 + \"-submenu-label\"\n        }, translate(view, this.options.label || \"\"));\n        let wrap = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix$1 + \"-submenu-wrap\"\n        }, label, (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix$1 + \"-submenu\"\n        }, items.dom));\n        let listeningOnClose = null;\n        label.addEventListener(\"mousedown\", (e)=>{\n            e.preventDefault();\n            markMenuEvent(e);\n            setClass(wrap, prefix$1 + \"-submenu-wrap-active\", false);\n            if (!listeningOnClose) win.addEventListener(\"mousedown\", listeningOnClose = ()=>{\n                if (!isMenuEvent(wrap)) {\n                    wrap.classList.remove(prefix$1 + \"-submenu-wrap-active\");\n                    win.removeEventListener(\"mousedown\", listeningOnClose);\n                    listeningOnClose = null;\n                }\n            });\n        });\n        function update(state) {\n            let inner = items.update(state);\n            wrap.style.display = inner ? \"\" : \"none\";\n            return inner;\n        }\n        return {\n            dom: wrap,\n            update\n        };\n    }\n}\n/**\nRender the given, possibly nested, array of menu elements into a\ndocument fragment, placing separators between them (and ensuring no\nsuperfluous separators appear when some of the groups turn out to\nbe empty).\n*/ function renderGrouped(view, content) {\n    let result = document.createDocumentFragment();\n    let updates = [], separators = [];\n    for(let i = 0; i < content.length; i++){\n        let items = content[i], localUpdates = [], localNodes = [];\n        for(let j = 0; j < items.length; j++){\n            let { dom, update } = items[j].render(view);\n            let span = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"span\", {\n                class: prefix$1 + \"item\"\n            }, dom);\n            result.appendChild(span);\n            localNodes.push(span);\n            localUpdates.push(update);\n        }\n        if (localUpdates.length) {\n            updates.push(combineUpdates(localUpdates, localNodes));\n            if (i < content.length - 1) separators.push(result.appendChild(separator()));\n        }\n    }\n    function update(state) {\n        let something = false, needSep = false;\n        for(let i = 0; i < updates.length; i++){\n            let hasContent = updates[i](state);\n            if (i) separators[i - 1].style.display = needSep && hasContent ? \"\" : \"none\";\n            needSep = hasContent;\n            if (hasContent) something = true;\n        }\n        return something;\n    }\n    return {\n        dom: result,\n        update\n    };\n}\nfunction separator() {\n    return (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"span\", {\n        class: prefix$1 + \"separator\"\n    });\n}\n/**\nA set of basic editor-related icons. Contains the properties\n`join`, `lift`, `selectParentNode`, `undo`, `redo`, `strong`, `em`,\n`code`, `link`, `bulletList`, `orderedList`, and `blockquote`, each\nholding an object that can be used as the `icon` option to\n`MenuItem`.\n*/ const icons = {\n    join: {\n        width: 800,\n        height: 900,\n        path: \"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z\"\n    },\n    lift: {\n        width: 1024,\n        height: 1024,\n        path: \"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z\"\n    },\n    selectParentNode: {\n        text: \"â¬š\",\n        css: \"font-weight: bold\"\n    },\n    undo: {\n        width: 1024,\n        height: 1024,\n        path: \"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z\"\n    },\n    redo: {\n        width: 1024,\n        height: 1024,\n        path: \"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z\"\n    },\n    strong: {\n        width: 805,\n        height: 1024,\n        path: \"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z\"\n    },\n    em: {\n        width: 585,\n        height: 1024,\n        path: \"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z\"\n    },\n    code: {\n        width: 896,\n        height: 1024,\n        path: \"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z\"\n    },\n    link: {\n        width: 951,\n        height: 1024,\n        path: \"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z\"\n    },\n    bulletList: {\n        width: 768,\n        height: 896,\n        path: \"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z\"\n    },\n    orderedList: {\n        width: 768,\n        height: 896,\n        path: \"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z\"\n    },\n    blockquote: {\n        width: 640,\n        height: 896,\n        path: \"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z\"\n    }\n};\n/**\nMenu item for the `joinUp` command.\n*/ const joinUpItem = new MenuItem({\n    title: \"Join with above block\",\n    run: prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.joinUp,\n    select: (state)=>(0,prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.joinUp)(state),\n    icon: icons.join\n});\n/**\nMenu item for the `lift` command.\n*/ const liftItem = new MenuItem({\n    title: \"Lift out of enclosing block\",\n    run: prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.lift,\n    select: (state)=>(0,prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.lift)(state),\n    icon: icons.lift\n});\n/**\nMenu item for the `selectParentNode` command.\n*/ const selectParentNodeItem = new MenuItem({\n    title: \"Select parent node\",\n    run: prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.selectParentNode,\n    select: (state)=>(0,prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.selectParentNode)(state),\n    icon: icons.selectParentNode\n});\n/**\nMenu item for the `undo` command.\n*/ let undoItem = new MenuItem({\n    title: \"Undo last change\",\n    run: prosemirror_history__WEBPACK_IMPORTED_MODULE_2__.undo,\n    enable: (state)=>(0,prosemirror_history__WEBPACK_IMPORTED_MODULE_2__.undo)(state),\n    icon: icons.undo\n});\n/**\nMenu item for the `redo` command.\n*/ let redoItem = new MenuItem({\n    title: \"Redo last undone change\",\n    run: prosemirror_history__WEBPACK_IMPORTED_MODULE_2__.redo,\n    enable: (state)=>(0,prosemirror_history__WEBPACK_IMPORTED_MODULE_2__.redo)(state),\n    icon: icons.redo\n});\n/**\nBuild a menu item for wrapping the selection in a given node type.\nAdds `run` and `select` properties to the ones present in\n`options`. `options.attrs` may be an object that provides\nattributes for the wrapping node.\n*/ function wrapItem(nodeType, options) {\n    let passedOptions = {\n        run (state, dispatch) {\n            return (0,prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.wrapIn)(nodeType, options.attrs)(state, dispatch);\n        },\n        select (state) {\n            return (0,prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.wrapIn)(nodeType, options.attrs)(state);\n        }\n    };\n    for(let prop in options)passedOptions[prop] = options[prop];\n    return new MenuItem(passedOptions);\n}\n/**\nBuild a menu item for changing the type of the textblock around the\nselection to the given type. Provides `run`, `active`, and `select`\nproperties. Others must be given in `options`. `options.attrs` may\nbe an object to provide the attributes for the textblock node.\n*/ function blockTypeItem(nodeType, options) {\n    let command = (0,prosemirror_commands__WEBPACK_IMPORTED_MODULE_1__.setBlockType)(nodeType, options.attrs);\n    let passedOptions = {\n        run: command,\n        enable (state) {\n            return command(state);\n        },\n        active (state) {\n            let { $from, to, node } = state.selection;\n            if (node) return node.hasMarkup(nodeType, options.attrs);\n            return to <= $from.end() && $from.parent.hasMarkup(nodeType, options.attrs);\n        }\n    };\n    for(let prop in options)passedOptions[prop] = options[prop];\n    return new MenuItem(passedOptions);\n}\n// Work around classList.toggle being broken in IE11\nfunction setClass(dom, cls, on) {\n    if (on) dom.classList.add(cls);\n    else dom.classList.remove(cls);\n}\nconst prefix = \"ProseMirror-menubar\";\nfunction isIOS() {\n    if (typeof navigator == \"undefined\") return false;\n    let agent = navigator.userAgent;\n    return !/Edge\\/\\d/.test(agent) && /AppleWebKit/.test(agent) && /Mobile\\/\\w+/.test(agent);\n}\n/**\nA plugin that will place a menu bar above the editor. Note that\nthis involves wrapping the editor in an additional `<div>`.\n*/ function menuBar(options) {\n    return new prosemirror_state__WEBPACK_IMPORTED_MODULE_3__.Plugin({\n        view (editorView) {\n            return new MenuBarView(editorView, options);\n        }\n    });\n}\nclass MenuBarView {\n    constructor(editorView, options){\n        this.editorView = editorView;\n        this.options = options;\n        this.spacer = null;\n        this.maxHeight = 0;\n        this.widthForMaxHeight = 0;\n        this.floating = false;\n        this.scrollHandler = null;\n        this.root = editorView.root;\n        this.wrapper = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix + \"-wrapper\"\n        });\n        this.menu = this.wrapper.appendChild((0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n            class: prefix\n        }));\n        this.menu.className = prefix;\n        if (editorView.dom.parentNode) editorView.dom.parentNode.replaceChild(this.wrapper, editorView.dom);\n        this.wrapper.appendChild(editorView.dom);\n        let { dom, update } = renderGrouped(this.editorView, this.options.content);\n        this.contentUpdate = update;\n        this.menu.appendChild(dom);\n        this.update();\n        if (options.floating && !isIOS()) {\n            this.updateFloat();\n            let potentialScrollers = getAllWrapping(this.wrapper);\n            this.scrollHandler = (e)=>{\n                let root = this.editorView.root;\n                if (!(root.body || root).contains(this.wrapper)) potentialScrollers.forEach((el)=>el.removeEventListener(\"scroll\", this.scrollHandler));\n                else this.updateFloat(e.target.getBoundingClientRect ? e.target : undefined);\n            };\n            potentialScrollers.forEach((el)=>el.addEventListener(\"scroll\", this.scrollHandler));\n        }\n    }\n    update() {\n        if (this.editorView.root != this.root) {\n            let { dom, update } = renderGrouped(this.editorView, this.options.content);\n            this.contentUpdate = update;\n            this.menu.replaceChild(dom, this.menu.firstChild);\n            this.root = this.editorView.root;\n        }\n        this.contentUpdate(this.editorView.state);\n        if (this.floating) {\n            this.updateScrollCursor();\n        } else {\n            if (this.menu.offsetWidth != this.widthForMaxHeight) {\n                this.widthForMaxHeight = this.menu.offsetWidth;\n                this.maxHeight = 0;\n            }\n            if (this.menu.offsetHeight > this.maxHeight) {\n                this.maxHeight = this.menu.offsetHeight;\n                this.menu.style.minHeight = this.maxHeight + \"px\";\n            }\n        }\n    }\n    updateScrollCursor() {\n        let selection = this.editorView.root.getSelection();\n        if (!selection.focusNode) return;\n        let rects = selection.getRangeAt(0).getClientRects();\n        let selRect = rects[selectionIsInverted(selection) ? 0 : rects.length - 1];\n        if (!selRect) return;\n        let menuRect = this.menu.getBoundingClientRect();\n        if (selRect.top < menuRect.bottom && selRect.bottom > menuRect.top) {\n            let scrollable = findWrappingScrollable(this.wrapper);\n            if (scrollable) scrollable.scrollTop -= menuRect.bottom - selRect.top;\n        }\n    }\n    updateFloat(scrollAncestor) {\n        let parent = this.wrapper, editorRect = parent.getBoundingClientRect(), top = scrollAncestor ? Math.max(0, scrollAncestor.getBoundingClientRect().top) : 0;\n        if (this.floating) {\n            if (editorRect.top >= top || editorRect.bottom < this.menu.offsetHeight + 10) {\n                this.floating = false;\n                this.menu.style.position = this.menu.style.left = this.menu.style.top = this.menu.style.width = \"\";\n                this.menu.style.display = \"\";\n                this.spacer.parentNode.removeChild(this.spacer);\n                this.spacer = null;\n            } else {\n                let border = (parent.offsetWidth - parent.clientWidth) / 2;\n                this.menu.style.left = editorRect.left + border + \"px\";\n                this.menu.style.display = editorRect.top > (this.editorView.dom.ownerDocument.defaultView || window).innerHeight ? \"none\" : \"\";\n                if (scrollAncestor) this.menu.style.top = top + \"px\";\n            }\n        } else {\n            if (editorRect.top < top && editorRect.bottom >= this.menu.offsetHeight + 10) {\n                this.floating = true;\n                let menuRect = this.menu.getBoundingClientRect();\n                this.menu.style.left = menuRect.left + \"px\";\n                this.menu.style.width = menuRect.width + \"px\";\n                if (scrollAncestor) this.menu.style.top = top + \"px\";\n                this.menu.style.position = \"fixed\";\n                this.spacer = (0,crelt__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"div\", {\n                    class: prefix + \"-spacer\",\n                    style: `height: ${menuRect.height}px`\n                });\n                parent.insertBefore(this.spacer, this.menu);\n            }\n        }\n    }\n    destroy() {\n        if (this.wrapper.parentNode) this.wrapper.parentNode.replaceChild(this.editorView.dom, this.wrapper);\n    }\n}\n// Not precise, but close enough\nfunction selectionIsInverted(selection) {\n    if (selection.anchorNode == selection.focusNode) return selection.anchorOffset > selection.focusOffset;\n    return selection.anchorNode.compareDocumentPosition(selection.focusNode) == Node.DOCUMENT_POSITION_FOLLOWING;\n}\nfunction findWrappingScrollable(node) {\n    for(let cur = node.parentNode; cur; cur = cur.parentNode)if (cur.scrollHeight > cur.clientHeight) return cur;\n}\nfunction getAllWrapping(node) {\n    let res = [\n        node.ownerDocument.defaultView || window\n    ];\n    for(let cur = node.parentNode; cur; cur = cur.parentNode)res.push(cur);\n    return res;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vcHJvc2VtaXJyb3ItbWVudUAxLjIuNS9ub2RlX21vZHVsZXMvcHJvc2VtaXJyb3ItbWVudS9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlCO0FBQ21FO0FBQzNDO0FBQ047QUFFM0MsTUFBTVMsTUFBTTtBQUNaLE1BQU1DLFFBQVE7QUFDZCxNQUFNQyxXQUFXO0FBQ2pCLFNBQVNDLFNBQVNDLElBQUk7SUFDbEIsSUFBSUMsT0FBTztJQUNYLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixLQUFLRyxNQUFNLEVBQUVELElBQzdCRCxPQUFPLENBQUdBLFFBQVEsS0FBS0EsT0FBUUQsS0FBS0ksVUFBVSxDQUFDRixLQUFNO0lBQ3pELE9BQU9EO0FBQ1g7QUFDQSxTQUFTSSxRQUFRQyxJQUFJLEVBQUVDLElBQUk7SUFDdkIsSUFBSUMsTUFBTSxDQUFDRixLQUFLRyxRQUFRLElBQUksSUFBSUgsT0FBT0EsS0FBS0ksYUFBYSxLQUFLQztJQUM5RCxJQUFJQyxPQUFPSixJQUFJSyxhQUFhLENBQUM7SUFDN0JELEtBQUtFLFNBQVMsR0FBR2hCO0lBQ2pCLElBQUlTLEtBQUtQLElBQUksRUFBRTtRQUNYLElBQUksRUFBRUEsSUFBSSxFQUFFZSxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHVDtRQUM5QixJQUFJVSxPQUFPLGFBQWFsQixTQUFTQyxNQUFNa0IsUUFBUSxDQUFDO1FBQ2hELElBQUksQ0FBQ1YsSUFBSVcsY0FBYyxDQUFDRixPQUNwQkcsU0FBU2QsTUFBTVcsTUFBTVY7UUFDekIsSUFBSWMsTUFBTVQsS0FBS1UsV0FBVyxDQUFDZCxJQUFJZSxlQUFlLENBQUMzQixLQUFLO1FBQ3BEeUIsSUFBSUcsS0FBSyxDQUFDVCxLQUFLLEdBQUcsUUFBU0MsU0FBVTtRQUNyQyxJQUFJUyxNQUFNSixJQUFJQyxXQUFXLENBQUNkLElBQUllLGVBQWUsQ0FBQzNCLEtBQUs7UUFDbkQ2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QUk7WUFDOUM7UUFDSjtJQUNKO0lBQ0FvQyxVQUFVO1FBQ04sSUFBSSxJQUFJLENBQUN2SCxPQUFPLENBQUNvRixVQUFVLEVBQ3ZCLElBQUksQ0FBQ3BGLE9BQU8sQ0FBQ29GLFVBQVUsQ0FBQ0MsWUFBWSxDQUFDLElBQUksQ0FBQ1QsVUFBVSxDQUFDL0gsR0FBRyxFQUFFLElBQUksQ0FBQ21ELE9BQU87SUFDOUU7QUFDSjtBQUNBLGdDQUFnQztBQUNoQyxTQUFTd0csb0JBQW9CekMsU0FBUztJQUNsQyxJQUFJQSxVQUFVeUQsVUFBVSxJQUFJekQsVUFBVW9DLFNBQVMsRUFDM0MsT0FBT3BDLFVBQVUwRCxZQUFZLEdBQUcxRCxVQUFVMkQsV0FBVztJQUN6RCxPQUFPM0QsVUFBVXlELFVBQVUsQ0FBQ0csdUJBQXVCLENBQUM1RCxVQUFVb0MsU0FBUyxLQUFLeUIsS0FBS0MsMkJBQTJCO0FBQ2hIO0FBQ0EsU0FBU2pCLHVCQUF1QmhMLElBQUk7SUFDaEMsSUFBSyxJQUFJa00sTUFBTWxNLEtBQUt3SixVQUFVLEVBQUUwQyxLQUFLQSxNQUFNQSxJQUFJMUMsVUFBVSxDQUNyRCxJQUFJMEMsSUFBSUMsWUFBWSxHQUFHRCxJQUFJRSxZQUFZLEVBQ25DLE9BQU9GO0FBQ25CO0FBQ0EsU0FBU3JDLGVBQWU3SixJQUFJO0lBQ3hCLElBQUlxTSxNQUFNO1FBQUNyTSxLQUFLRixhQUFhLENBQUM4RSxXQUFXLElBQUlDO0tBQU87SUFDcEQsSUFBSyxJQUFJcUgsTUFBTWxNLEtBQUt3SixVQUFVLEVBQUUwQyxLQUFLQSxNQUFNQSxJQUFJMUMsVUFBVSxDQUNyRDZDLElBQUkxRyxJQUFJLENBQUN1RztJQUNiLE9BQU9HO0FBQ1g7QUFFdUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZW50aW5lbC1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy8ucG5wbS9wcm9zZW1pcnJvci1tZW51QDEuMi41L25vZGVfbW9kdWxlcy9wcm9zZW1pcnJvci1tZW51L2Rpc3QvaW5kZXguanM/NmQyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlbCBmcm9tICdjcmVsdCc7XG5pbXBvcnQgeyBqb2luVXAsIGxpZnQsIHNlbGVjdFBhcmVudE5vZGUsIHNldEJsb2NrVHlwZSwgd3JhcEluIH0gZnJvbSAncHJvc2VtaXJyb3ItY29tbWFuZHMnO1xuaW1wb3J0IHsgdW5kbywgcmVkbyB9IGZyb20gJ3Byb3NlbWlycm9yLWhpc3RvcnknO1xuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAncHJvc2VtaXJyb3Itc3RhdGUnO1xuXG5jb25zdCBTVkcgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG5jb25zdCBYTElOSyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiO1xuY29uc3QgcHJlZml4JDIgPSBcIlByb3NlTWlycm9yLWljb25cIjtcbmZ1bmN0aW9uIGhhc2hQYXRoKHBhdGgpIHtcbiAgICBsZXQgaGFzaCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKVxuICAgICAgICBoYXNoID0gKCgoaGFzaCA8PCA1KSAtIGhhc2gpICsgcGF0aC5jaGFyQ29kZUF0KGkpKSB8IDA7XG4gICAgcmV0dXJuIGhhc2g7XG59XG5mdW5jdGlvbiBnZXRJY29uKHJvb3QsIGljb24pIHtcbiAgICBsZXQgZG9jID0gKHJvb3Qubm9kZVR5cGUgPT0gOSA/IHJvb3QgOiByb290Lm93bmVyRG9jdW1lbnQpIHx8IGRvY3VtZW50O1xuICAgIGxldCBub2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbm9kZS5jbGFzc05hbWUgPSBwcmVmaXgkMjtcbiAgICBpZiAoaWNvbi5wYXRoKSB7XG4gICAgICAgIGxldCB7IHBhdGgsIHdpZHRoLCBoZWlnaHQgfSA9IGljb247XG4gICAgICAgIGxldCBuYW1lID0gXCJwbS1pY29uLVwiICsgaGFzaFBhdGgocGF0aCkudG9TdHJpbmcoMTYpO1xuICAgICAgICBpZiAoIWRvYy5nZXRFbGVtZW50QnlJZChuYW1lKSlcbiAgICAgICAgICAgIGJ1aWxkU1ZHKHJvb3QsIG5hbWUsIGljb24pO1xuICAgICAgICBsZXQgc3ZnID0gbm9kZS5hcHBlbmRDaGlsZChkb2MuY3JlYXRlRWxlbWVudE5TKFNWRywgXCJzdmdcIikpO1xuICAgICAgICBzdmcuc3R5bGUud2lkdGggPSAod2lkdGggLyBoZWlnaHQpICsgXCJlbVwiO1xuICAgICAgICBsZXQgdXNlID0gc3ZnLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVFbGVtZW50TlMoU1ZHLCBcInVzZVwiKSk7XG4gICAgICAgIHVzZS5zZXRBdHRyaWJ1dGVOUyhYTElOSywgXCJocmVmXCIsIC8oW14jXSopLy5leGVjKGRvYy5sb2NhdGlvbi50b1N0cmluZygpKVsxXSArIFwiI1wiICsgbmFtZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGljb24uZG9tKSB7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaWNvbi5kb20uY2xvbmVOb2RlKHRydWUpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCB7IHRleHQsIGNzcyB9ID0gaWNvbjtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkb2MuY3JlYXRlRWxlbWVudChcInNwYW5cIikpLnRleHRDb250ZW50ID0gdGV4dCB8fCAnJztcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIG5vZGUuZmlyc3RDaGlsZC5zdHlsZS5jc3NUZXh0ID0gY3NzO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIGJ1aWxkU1ZHKHJvb3QsIG5hbWUsIGRhdGEpIHtcbiAgICBsZXQgW2RvYywgdG9wXSA9IHJvb3Qubm9kZVR5cGUgPT0gOSA/IFtyb290LCByb290LmJvZHldIDogW3Jvb3Qub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCwgcm9vdF07XG4gICAgbGV0IGNvbGxlY3Rpb24gPSBkb2MuZ2V0RWxlbWVudEJ5SWQocHJlZml4JDIgKyBcIi1jb2xsZWN0aW9uXCIpO1xuICAgIGlmICghY29sbGVjdGlvbikge1xuICAgICAgICBjb2xsZWN0aW9uID0gZG9jLmNyZWF0ZUVsZW1lbnROUyhTVkcsIFwic3ZnXCIpO1xuICAgICAgICBjb2xsZWN0aW9uLmlkID0gcHJlZml4JDIgKyBcIi1jb2xsZWN0aW9uXCI7XG4gICAgICAgIGNvbGxlY3Rpb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB0b3AuaW5zZXJ0QmVmb3JlKGNvbGxlY3Rpb24sIHRvcC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgbGV0IHN5bSA9IGRvYy5jcmVhdGVFbGVtZW50TlMoU1ZHLCBcInN5bWJvbFwiKTtcbiAgICBzeW0uaWQgPSBuYW1lO1xuICAgIHN5bS5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIFwiICsgZGF0YS53aWR0aCArIFwiIFwiICsgZGF0YS5oZWlnaHQpO1xuICAgIGxldCBwYXRoID0gc3ltLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVFbGVtZW50TlMoU1ZHLCBcInBhdGhcIikpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBkYXRhLnBhdGgpO1xuICAgIGNvbGxlY3Rpb24uYXBwZW5kQ2hpbGQoc3ltKTtcbn1cblxuY29uc3QgcHJlZml4JDEgPSBcIlByb3NlTWlycm9yLW1lbnVcIjtcbi8qKlxuQW4gaWNvbiBvciBsYWJlbCB0aGF0LCB3aGVuIGNsaWNrZWQsIGV4ZWN1dGVzIGEgY29tbWFuZC5cbiovXG5jbGFzcyBNZW51SXRlbSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbWVudSBpdGVtLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHNwZWMgdXNlZCB0byBjcmVhdGUgdGhpcyBpdGVtLlxuICAgICovXG4gICAgc3BlYykge1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjO1xuICAgIH1cbiAgICAvKipcbiAgICBSZW5kZXJzIHRoZSBpY29uIGFjY29yZGluZyB0byBpdHMgW2Rpc3BsYXlcbiAgICBzcGVjXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbWVudS5NZW51SXRlbVNwZWMuZGlzcGxheSksIGFuZCBhZGRzIGFuIGV2ZW50IGhhbmRsZXIgd2hpY2hcbiAgICBleGVjdXRlcyB0aGUgY29tbWFuZCB3aGVuIHRoZSByZXByZXNlbnRhdGlvbiBpcyBjbGlja2VkLlxuICAgICovXG4gICAgcmVuZGVyKHZpZXcpIHtcbiAgICAgICAgbGV0IHNwZWMgPSB0aGlzLnNwZWM7XG4gICAgICAgIGxldCBkb20gPSBzcGVjLnJlbmRlciA/IHNwZWMucmVuZGVyKHZpZXcpXG4gICAgICAgICAgICA6IHNwZWMuaWNvbiA/IGdldEljb24odmlldy5yb290LCBzcGVjLmljb24pXG4gICAgICAgICAgICAgICAgOiBzcGVjLmxhYmVsID8gY3JlbChcImRpdlwiLCBudWxsLCB0cmFuc2xhdGUodmlldywgc3BlYy5sYWJlbCkpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgaWYgKCFkb20pXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk1lbnVJdGVtIHdpdGhvdXQgaWNvbiBvciBsYWJlbCBwcm9wZXJ0eVwiKTtcbiAgICAgICAgaWYgKHNwZWMudGl0bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gKHR5cGVvZiBzcGVjLnRpdGxlID09PSBcImZ1bmN0aW9uXCIgPyBzcGVjLnRpdGxlKHZpZXcuc3RhdGUpIDogc3BlYy50aXRsZSk7XG4gICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgdHJhbnNsYXRlKHZpZXcsIHRpdGxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWMuY2xhc3MpXG4gICAgICAgICAgICBkb20uY2xhc3NMaXN0LmFkZChzcGVjLmNsYXNzKTtcbiAgICAgICAgaWYgKHNwZWMuY3NzKVxuICAgICAgICAgICAgZG9tLnN0eWxlLmNzc1RleHQgKz0gc3BlYy5jc3M7XG4gICAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGUgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKCFkb20uY2xhc3NMaXN0LmNvbnRhaW5zKHByZWZpeCQxICsgXCItZGlzYWJsZWRcIikpXG4gICAgICAgICAgICAgICAgc3BlYy5ydW4odmlldy5zdGF0ZSwgdmlldy5kaXNwYXRjaCwgdmlldywgZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChzcGVjLnNlbGVjdCkge1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHNwZWMuc2VsZWN0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUuZGlzcGxheSA9IHNlbGVjdGVkID8gXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChzcGVjLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQgPSBzcGVjLmVuYWJsZShzdGF0ZSkgfHwgZmFsc2U7XG4gICAgICAgICAgICAgICAgc2V0Q2xhc3MoZG9tLCBwcmVmaXgkMSArIFwiLWRpc2FibGVkXCIsICFlbmFibGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcGVjLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGxldCBhY3RpdmUgPSBlbmFibGVkICYmIHNwZWMuYWN0aXZlKHN0YXRlKSB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICBzZXRDbGFzcyhkb20sIHByZWZpeCQxICsgXCItYWN0aXZlXCIsIGFjdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkb20sIHVwZGF0ZSB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyYW5zbGF0ZSh2aWV3LCB0ZXh0KSB7XG4gICAgcmV0dXJuIHZpZXcuX3Byb3BzLnRyYW5zbGF0ZSA/IHZpZXcuX3Byb3BzLnRyYW5zbGF0ZSh0ZXh0KSA6IHRleHQ7XG59XG5sZXQgbGFzdE1lbnVFdmVudCA9IHsgdGltZTogMCwgbm9kZTogbnVsbCB9O1xuZnVuY3Rpb24gbWFya01lbnVFdmVudChlKSB7XG4gICAgbGFzdE1lbnVFdmVudC50aW1lID0gRGF0ZS5ub3coKTtcbiAgICBsYXN0TWVudUV2ZW50Lm5vZGUgPSBlLnRhcmdldDtcbn1cbmZ1bmN0aW9uIGlzTWVudUV2ZW50KHdyYXBwZXIpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKSAtIDEwMCA8IGxhc3RNZW51RXZlbnQudGltZSAmJlxuICAgICAgICBsYXN0TWVudUV2ZW50Lm5vZGUgJiYgd3JhcHBlci5jb250YWlucyhsYXN0TWVudUV2ZW50Lm5vZGUpO1xufVxuLyoqXG5BIGRyb3AtZG93biBtZW51LCBkaXNwbGF5ZWQgYXMgYSBsYWJlbCB3aXRoIGEgZG93bndhcmRzLXBvaW50aW5nXG50cmlhbmdsZSB0byB0aGUgcmlnaHQgb2YgaXQuXG4qL1xuY2xhc3MgRHJvcGRvd24ge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIGRyb3Bkb3duIHdyYXBwaW5nIHRoZSBlbGVtZW50cy5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHRoaXMuY29udGVudCA9IEFycmF5LmlzQXJyYXkoY29udGVudCkgPyBjb250ZW50IDogW2NvbnRlbnRdO1xuICAgIH1cbiAgICAvKipcbiAgICBSZW5kZXIgdGhlIGRyb3Bkb3duIG1lbnUgYW5kIHN1Yi1pdGVtcy5cbiAgICAqL1xuICAgIHJlbmRlcih2aWV3KSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gcmVuZGVyRHJvcGRvd25JdGVtcyh0aGlzLmNvbnRlbnQsIHZpZXcpO1xuICAgICAgICBsZXQgd2luID0gdmlldy5kb20ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgICAgIGxldCBsYWJlbCA9IGNyZWwoXCJkaXZcIiwgeyBjbGFzczogcHJlZml4JDEgKyBcIi1kcm9wZG93biBcIiArICh0aGlzLm9wdGlvbnMuY2xhc3MgfHwgXCJcIiksXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5vcHRpb25zLmNzcyB9LCB0cmFuc2xhdGUodmlldywgdGhpcy5vcHRpb25zLmxhYmVsIHx8IFwiXCIpKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50aXRsZSlcbiAgICAgICAgICAgIGxhYmVsLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIHRyYW5zbGF0ZSh2aWV3LCB0aGlzLm9wdGlvbnMudGl0bGUpKTtcbiAgICAgICAgbGV0IHdyYXAgPSBjcmVsKFwiZGl2XCIsIHsgY2xhc3M6IHByZWZpeCQxICsgXCItZHJvcGRvd24td3JhcFwiIH0sIGxhYmVsKTtcbiAgICAgICAgbGV0IG9wZW4gPSBudWxsO1xuICAgICAgICBsZXQgbGlzdGVuaW5nT25DbG9zZSA9IG51bGw7XG4gICAgICAgIGxldCBjbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChvcGVuICYmIG9wZW4uY2xvc2UoKSkge1xuICAgICAgICAgICAgICAgIG9wZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIHdpbi5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxpc3RlbmluZ09uQ2xvc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGUgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbWFya01lbnVFdmVudChlKTtcbiAgICAgICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wZW4gPSB0aGlzLmV4cGFuZCh3cmFwLCBjb250ZW50LmRvbSk7XG4gICAgICAgICAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgbGlzdGVuaW5nT25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc01lbnVFdmVudCh3cmFwKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgIGxldCBpbm5lciA9IGNvbnRlbnQudXBkYXRlKHN0YXRlKTtcbiAgICAgICAgICAgIHdyYXAuc3R5bGUuZGlzcGxheSA9IGlubmVyID8gXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRvbTogd3JhcCwgdXBkYXRlIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZXhwYW5kKGRvbSwgaXRlbXMpIHtcbiAgICAgICAgbGV0IG1lbnVET00gPSBjcmVsKFwiZGl2XCIsIHsgY2xhc3M6IHByZWZpeCQxICsgXCItZHJvcGRvd24tbWVudSBcIiArICh0aGlzLm9wdGlvbnMuY2xhc3MgfHwgXCJcIikgfSwgaXRlbXMpO1xuICAgICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgICAgIGlmIChkb25lKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgZG9tLnJlbW92ZUNoaWxkKG1lbnVET00pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZG9tLmFwcGVuZENoaWxkKG1lbnVET00pO1xuICAgICAgICByZXR1cm4geyBjbG9zZSwgbm9kZTogbWVudURPTSB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlbmRlckRyb3Bkb3duSXRlbXMoaXRlbXMsIHZpZXcpIHtcbiAgICBsZXQgcmVuZGVyZWQgPSBbXSwgdXBkYXRlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHsgZG9tLCB1cGRhdGUgfSA9IGl0ZW1zW2ldLnJlbmRlcih2aWV3KTtcbiAgICAgICAgcmVuZGVyZWQucHVzaChjcmVsKFwiZGl2XCIsIHsgY2xhc3M6IHByZWZpeCQxICsgXCItZHJvcGRvd24taXRlbVwiIH0sIGRvbSkpO1xuICAgICAgICB1cGRhdGVzLnB1c2godXBkYXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZG9tOiByZW5kZXJlZCwgdXBkYXRlOiBjb21iaW5lVXBkYXRlcyh1cGRhdGVzLCByZW5kZXJlZCkgfTtcbn1cbmZ1bmN0aW9uIGNvbWJpbmVVcGRhdGVzKHVwZGF0ZXMsIG5vZGVzKSB7XG4gICAgcmV0dXJuIChzdGF0ZSkgPT4ge1xuICAgICAgICBsZXQgc29tZXRoaW5nID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHVwID0gdXBkYXRlc1tpXShzdGF0ZSk7XG4gICAgICAgICAgICBub2Rlc1tpXS5zdHlsZS5kaXNwbGF5ID0gdXAgPyBcIlwiIDogXCJub25lXCI7XG4gICAgICAgICAgICBpZiAodXApXG4gICAgICAgICAgICAgICAgc29tZXRoaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29tZXRoaW5nO1xuICAgIH07XG59XG4vKipcblJlcHJlc2VudHMgYSBzdWJtZW51IHdyYXBwaW5nIGEgZ3JvdXAgb2YgZWxlbWVudHMgdGhhdCBzdGFydFxuaGlkZGVuIGFuZCBleHBhbmQgdG8gdGhlIHJpZ2h0IHdoZW4gaG92ZXJlZCBvdmVyIG9yIHRhcHBlZC5cbiovXG5jbGFzcyBEcm9wZG93blN1Ym1lbnUge1xuICAgIC8qKlxuICAgIENyZWF0ZXMgYSBzdWJtZW51IGZvciB0aGUgZ2l2ZW4gZ3JvdXAgb2YgbWVudSBlbGVtZW50cy4gVGhlXG4gICAgZm9sbG93aW5nIG9wdGlvbnMgYXJlIHJlY29nbml6ZWQ6XG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb250ZW50LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBBcnJheS5pc0FycmF5KGNvbnRlbnQpID8gY29udGVudCA6IFtjb250ZW50XTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVuZGVycyB0aGUgc3VibWVudS5cbiAgICAqL1xuICAgIHJlbmRlcih2aWV3KSB7XG4gICAgICAgIGxldCBpdGVtcyA9IHJlbmRlckRyb3Bkb3duSXRlbXModGhpcy5jb250ZW50LCB2aWV3KTtcbiAgICAgICAgbGV0IHdpbiA9IHZpZXcuZG9tLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93O1xuICAgICAgICBsZXQgbGFiZWwgPSBjcmVsKFwiZGl2XCIsIHsgY2xhc3M6IHByZWZpeCQxICsgXCItc3VibWVudS1sYWJlbFwiIH0sIHRyYW5zbGF0ZSh2aWV3LCB0aGlzLm9wdGlvbnMubGFiZWwgfHwgXCJcIikpO1xuICAgICAgICBsZXQgd3JhcCA9IGNyZWwoXCJkaXZcIiwgeyBjbGFzczogcHJlZml4JDEgKyBcIi1zdWJtZW51LXdyYXBcIiB9LCBsYWJlbCwgY3JlbChcImRpdlwiLCB7IGNsYXNzOiBwcmVmaXgkMSArIFwiLXN1Ym1lbnVcIiB9LCBpdGVtcy5kb20pKTtcbiAgICAgICAgbGV0IGxpc3RlbmluZ09uQ2xvc2UgPSBudWxsO1xuICAgICAgICBsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGUgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbWFya01lbnVFdmVudChlKTtcbiAgICAgICAgICAgIHNldENsYXNzKHdyYXAsIHByZWZpeCQxICsgXCItc3VibWVudS13cmFwLWFjdGl2ZVwiLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoIWxpc3RlbmluZ09uQ2xvc2UpXG4gICAgICAgICAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgbGlzdGVuaW5nT25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc01lbnVFdmVudCh3cmFwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcC5jbGFzc0xpc3QucmVtb3ZlKHByZWZpeCQxICsgXCItc3VibWVudS13cmFwLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbi5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxpc3RlbmluZ09uQ2xvc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nT25DbG9zZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZShzdGF0ZSkge1xuICAgICAgICAgICAgbGV0IGlubmVyID0gaXRlbXMudXBkYXRlKHN0YXRlKTtcbiAgICAgICAgICAgIHdyYXAuc3R5bGUuZGlzcGxheSA9IGlubmVyID8gXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRvbTogd3JhcCwgdXBkYXRlIH07XG4gICAgfVxufVxuLyoqXG5SZW5kZXIgdGhlIGdpdmVuLCBwb3NzaWJseSBuZXN0ZWQsIGFycmF5IG9mIG1lbnUgZWxlbWVudHMgaW50byBhXG5kb2N1bWVudCBmcmFnbWVudCwgcGxhY2luZyBzZXBhcmF0b3JzIGJldHdlZW4gdGhlbSAoYW5kIGVuc3VyaW5nIG5vXG5zdXBlcmZsdW91cyBzZXBhcmF0b3JzIGFwcGVhciB3aGVuIHNvbWUgb2YgdGhlIGdyb3VwcyB0dXJuIG91dCB0b1xuYmUgZW1wdHkpLlxuKi9cbmZ1bmN0aW9uIHJlbmRlckdyb3VwZWQodmlldywgY29udGVudCkge1xuICAgIGxldCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgbGV0IHVwZGF0ZXMgPSBbXSwgc2VwYXJhdG9ycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgaXRlbXMgPSBjb250ZW50W2ldLCBsb2NhbFVwZGF0ZXMgPSBbXSwgbG9jYWxOb2RlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGl0ZW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBsZXQgeyBkb20sIHVwZGF0ZSB9ID0gaXRlbXNbal0ucmVuZGVyKHZpZXcpO1xuICAgICAgICAgICAgbGV0IHNwYW4gPSBjcmVsKFwic3BhblwiLCB7IGNsYXNzOiBwcmVmaXgkMSArIFwiaXRlbVwiIH0sIGRvbSk7XG4gICAgICAgICAgICByZXN1bHQuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgICAgICBsb2NhbE5vZGVzLnB1c2goc3Bhbik7XG4gICAgICAgICAgICBsb2NhbFVwZGF0ZXMucHVzaCh1cGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2NhbFVwZGF0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goY29tYmluZVVwZGF0ZXMobG9jYWxVcGRhdGVzLCBsb2NhbE5vZGVzKSk7XG4gICAgICAgICAgICBpZiAoaSA8IGNvbnRlbnQubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3JzLnB1c2gocmVzdWx0LmFwcGVuZENoaWxkKHNlcGFyYXRvcigpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlKHN0YXRlKSB7XG4gICAgICAgIGxldCBzb21ldGhpbmcgPSBmYWxzZSwgbmVlZFNlcCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBoYXNDb250ZW50ID0gdXBkYXRlc1tpXShzdGF0ZSk7XG4gICAgICAgICAgICBpZiAoaSlcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3JzW2kgLSAxXS5zdHlsZS5kaXNwbGF5ID0gbmVlZFNlcCAmJiBoYXNDb250ZW50ID8gXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgbmVlZFNlcCA9IGhhc0NvbnRlbnQ7XG4gICAgICAgICAgICBpZiAoaGFzQ29udGVudClcbiAgICAgICAgICAgICAgICBzb21ldGhpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb21ldGhpbmc7XG4gICAgfVxuICAgIHJldHVybiB7IGRvbTogcmVzdWx0LCB1cGRhdGUgfTtcbn1cbmZ1bmN0aW9uIHNlcGFyYXRvcigpIHtcbiAgICByZXR1cm4gY3JlbChcInNwYW5cIiwgeyBjbGFzczogcHJlZml4JDEgKyBcInNlcGFyYXRvclwiIH0pO1xufVxuLyoqXG5BIHNldCBvZiBiYXNpYyBlZGl0b3ItcmVsYXRlZCBpY29ucy4gQ29udGFpbnMgdGhlIHByb3BlcnRpZXNcbmBqb2luYCwgYGxpZnRgLCBgc2VsZWN0UGFyZW50Tm9kZWAsIGB1bmRvYCwgYHJlZG9gLCBgc3Ryb25nYCwgYGVtYCxcbmBjb2RlYCwgYGxpbmtgLCBgYnVsbGV0TGlzdGAsIGBvcmRlcmVkTGlzdGAsIGFuZCBgYmxvY2txdW90ZWAsIGVhY2hcbmhvbGRpbmcgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYXMgdGhlIGBpY29uYCBvcHRpb24gdG9cbmBNZW51SXRlbWAuXG4qL1xuY29uc3QgaWNvbnMgPSB7XG4gICAgam9pbjoge1xuICAgICAgICB3aWR0aDogODAwLCBoZWlnaHQ6IDkwMCxcbiAgICAgICAgcGF0aDogXCJNMCA3NWg4MDB2MTI1aC04MDB6IE0wIDgyNWg4MDB2LTEyNWgtODAweiBNMjUwIDQwMGgxMDB2LTEwMGgxMDB2MTAwaDEwMHYxMDBoLTEwMHYxMDBoLTEwMHYtMTAwaC0xMDB6XCJcbiAgICB9LFxuICAgIGxpZnQ6IHtcbiAgICAgICAgd2lkdGg6IDEwMjQsIGhlaWdodDogMTAyNCxcbiAgICAgICAgcGF0aDogXCJNMjE5IDMxMHYzMjlxMCA3LTUgMTJ0LTEyIDVxLTggMC0xMy01bC0xNjQtMTY0cS01LTUtNS0xM3Q1LTEzbDE2NC0xNjRxNS01IDEzLTUgNyAwIDEyIDV0NSAxMnpNMTAyNCA3NDl2MTA5cTAgNy01IDEydC0xMiA1aC05ODdxLTcgMC0xMi01dC01LTEydi0xMDlxMC03IDUtMTJ0MTItNWg5ODdxNyAwIDEyIDV0NSAxMnpNMTAyNCA1MzB2MTA5cTAgNy01IDEydC0xMiA1aC02MjFxLTcgMC0xMi01dC01LTEydi0xMDlxMC03IDUtMTJ0MTItNWg2MjFxNyAwIDEyIDV0NSAxMnpNMTAyNCAzMTB2MTA5cTAgNy01IDEydC0xMiA1aC02MjFxLTcgMC0xMi01dC01LTEydi0xMDlxMC03IDUtMTJ0MTItNWg2MjFxNyAwIDEyIDV0NSAxMnpNMTAyNCA5MXYxMDlxMCA3LTUgMTJ0LTEyIDVoLTk4N3EtNyAwLTEyLTV0LTUtMTJ2LTEwOXEwLTcgNS0xMnQxMi01aDk4N3E3IDAgMTIgNXQ1IDEyelwiXG4gICAgfSxcbiAgICBzZWxlY3RQYXJlbnROb2RlOiB7IHRleHQ6IFwiXFx1MmIxYVwiLCBjc3M6IFwiZm9udC13ZWlnaHQ6IGJvbGRcIiB9LFxuICAgIHVuZG86IHtcbiAgICAgICAgd2lkdGg6IDEwMjQsIGhlaWdodDogMTAyNCxcbiAgICAgICAgcGF0aDogXCJNNzYxIDEwMjRjMTEzLTIwNiAxMzItNTIwLTMxMy01MDl2MjUzbC0zODQtMzg0IDM4NC0zODR2MjQ4YzUzNC0xMyA1OTQgNDcyIDMxMyA3NzV6XCJcbiAgICB9LFxuICAgIHJlZG86IHtcbiAgICAgICAgd2lkdGg6IDEwMjQsIGhlaWdodDogMTAyNCxcbiAgICAgICAgcGF0aDogXCJNNTc2IDI0OHYtMjQ4bDM4NCAzODQtMzg0IDM4NHYtMjUzYy00NDYtMTAtNDI3IDMwMy0zMTMgNTA5LTI4MC0zMDMtMjIxLTc4OSAzMTMtNzc1elwiXG4gICAgfSxcbiAgICBzdHJvbmc6IHtcbiAgICAgICAgd2lkdGg6IDgwNSwgaGVpZ2h0OiAxMDI0LFxuICAgICAgICBwYXRoOiBcIk0zMTcgODY5cTQyIDE4IDgwIDE4IDIxNCAwIDIxNC0xOTEgMC02NS0yMy0xMDItMTUtMjUtMzUtNDJ0LTM4LTI2LTQ2LTE0LTQ4LTYtNTQtMXEtNDEgMC01NyA1IDAgMzAtMCA5MHQtMCA5MHEwIDQtMCAzOHQtMCA1NSAyIDQ3IDYgMzh6TTMwOSA0NDJxMjQgNCA2MiA0IDQ2IDAgODEtN3Q2Mi0yNSA0Mi01MSAxNC04MXEwLTQwLTE2LTcwdC00NS00Ni02MS0yNC03MC04cS0yOCAwLTc0IDcgMCAyOCAyIDg2dDIgODZxMCAxNS0wIDQ1dC0wIDQ1cTAgMjYgMCAzOXpNMCA5NTBsMS01M3E4LTIgNDgtOXQ2MC0xNXE0LTYgNy0xNXQ0LTE5IDMtMTggMS0yMSAwLTE5di0zN3EwLTU2MS0xMi01ODUtMi00LTEyLTh0LTI1LTYtMjgtNC0yNy0yLTE3LTFsLTItNDdxNTYtMSAxOTQtNnQyMTMtNXExMyAwIDM5IDB0MzggMHE0MCAwIDc4IDd0NzMgMjQgNjEgNDAgNDIgNTkgMTYgNzhxMCAyOS05IDU0dC0yMiA0MS0zNiAzMi00MSAyNS00OCAyMnE4OCAyMCAxNDYgNzZ0NTggMTQxcTAgNTctMjAgMTAydC01MyA3NC03OCA0OC05MyAyNy0xMDAgOHEtMjUgMC03NS0xdC03NS0xcS02MCAwLTE3NSA2dC0xMzIgNnpcIlxuICAgIH0sXG4gICAgZW06IHtcbiAgICAgICAgd2lkdGg6IDU4NSwgaGVpZ2h0OiAxMDI0LFxuICAgICAgICBwYXRoOiBcIk0wIDk0OWw5LTQ4cTMtMSA0Ni0xMnQ2My0yMXExNi0yMCAyMy01NyAwLTQgMzUtMTY1dDY1LTMxMCAyOS0xNjl2LTE0cS0xMy03LTMxLTEwdC0zOS00LTMzLTNsMTAtNThxMTggMSA2OCAzdDg1IDQgNjggMXEyNyAwIDU2LTF0NjktNCA1Ni0zcS0yIDIyLTEwIDUwLTE3IDUtNTggMTZ0LTYyIDE5cS00IDEwLTggMjR0LTUgMjItNCAyNi0zIDI0cS0xNSA4NC01MCAyMzl0LTQ0IDIwM3EtMSA1LTcgMzN0LTExIDUxLTkgNDctMyAzMmwwIDEwcTkgMiAxMDUgMTctMSAyNS05IDU2LTYgMC0xOCAwdC0xOCAwcS0xNiAwLTQ5LTV0LTQ5LTVxLTc4LTEtMTE3LTEtMjkgMC04MSA1dC02OSA2elwiXG4gICAgfSxcbiAgICBjb2RlOiB7XG4gICAgICAgIHdpZHRoOiA4OTYsIGhlaWdodDogMTAyNCxcbiAgICAgICAgcGF0aDogXCJNNjA4IDE5MmwtOTYgOTYgMjI0IDIyNC0yMjQgMjI0IDk2IDk2IDI4OC0zMjAtMjg4LTMyMHpNMjg4IDE5MmwtMjg4IDMyMCAyODggMzIwIDk2LTk2LTIyNC0yMjQgMjI0LTIyNC05Ni05NnpcIlxuICAgIH0sXG4gICAgbGluazoge1xuICAgICAgICB3aWR0aDogOTUxLCBoZWlnaHQ6IDEwMjQsXG4gICAgICAgIHBhdGg6IFwiTTgzMiA2OTRxMC0yMi0xNi0zOGwtMTE4LTExOHEtMTYtMTYtMzgtMTYtMjQgMC00MSAxOCAxIDEgMTAgMTB0MTIgMTIgOCAxMCA3IDE0IDIgMTVxMCAyMi0xNiAzOHQtMzggMTZxLTggMC0xNS0ydC0xNC03LTEwLTgtMTItMTItMTAtMTBxLTE4IDE3LTE4IDQxIDAgMjIgMTYgMzhsMTE3IDExOHExNSAxNSAzOCAxNSAyMiAwIDM4LTE0bDg0LTgzcTE2LTE2IDE2LTM4ek00MzAgMjkycTAtMjItMTYtMzhsLTExNy0xMThxLTE2LTE2LTM4LTE2LTIyIDAtMzggMTVsLTg0IDgzcS0xNiAxNi0xNiAzOCAwIDIyIDE2IDM4bDExOCAxMThxMTUgMTUgMzggMTUgMjQgMCA0MS0xNy0xLTEtMTAtMTB0LTEyLTEyLTgtMTAtNy0xNC0yLTE1cTAtMjIgMTYtMzh0MzgtMTZxOCAwIDE1IDJ0MTQgNyAxMCA4IDEyIDEyIDEwIDEwcTE4LTE3IDE4LTQxek05NDEgNjk0cTAgNjgtNDggMTE2bC04NCA4M3EtNDcgNDctMTE2IDQ3LTY5IDAtMTE2LTQ4bC0xMTctMTE4cS00Ny00Ny00Ny0xMTYgMC03MCA1MC0xMTlsLTUwLTUwcS00OSA1MC0xMTggNTAtNjggMC0xMTYtNDhsLTExOC0xMThxLTQ4LTQ4LTQ4LTExNnQ0OC0xMTZsODQtODNxNDctNDcgMTE2LTQ3IDY5IDAgMTE2IDQ4bDExNyAxMThxNDcgNDcgNDcgMTE2IDAgNzAtNTAgMTE5bDUwIDUwcTQ5LTUwIDExOC01MCA2OCAwIDExNiA0OGwxMTggMTE4cTQ4IDQ4IDQ4IDExNnpcIlxuICAgIH0sXG4gICAgYnVsbGV0TGlzdDoge1xuICAgICAgICB3aWR0aDogNzY4LCBoZWlnaHQ6IDg5NixcbiAgICAgICAgcGF0aDogXCJNMCA1MTJoMTI4di0xMjhoLTEyOHYxMjh6TTAgMjU2aDEyOHYtMTI4aC0xMjh2MTI4ek0wIDc2OGgxMjh2LTEyOGgtMTI4djEyOHpNMjU2IDUxMmg1MTJ2LTEyOGgtNTEydjEyOHpNMjU2IDI1Nmg1MTJ2LTEyOGgtNTEydjEyOHpNMjU2IDc2OGg1MTJ2LTEyOGgtNTEydjEyOHpcIlxuICAgIH0sXG4gICAgb3JkZXJlZExpc3Q6IHtcbiAgICAgICAgd2lkdGg6IDc2OCwgaGVpZ2h0OiA4OTYsXG4gICAgICAgIHBhdGg6IFwiTTMyMCA1MTJoNDQ4di0xMjhoLTQ0OHYxMjh6TTMyMCA3NjhoNDQ4di0xMjhoLTQ0OHYxMjh6TTMyMCAxMjh2MTI4aDQ0OHYtMTI4aC00NDh6TTc5IDM4NGg3OHYtMjU2aC0zNmwtODUgMjN2NTBsNDMtMnYxODV6TTE4OSA1OTBjMC0zNi0xMi03OC05Ni03OC0zMyAwLTY0IDYtODMgMTZsMSA2NmMyMS0xMCA0Mi0xNSA2Ny0xNXMzMiAxMSAzMiAyOGMwIDI2LTMwIDU4LTExMCAxMTJ2NTBoMTkydi02N2wtOTEgMmM0OS0zMCA4Ny02NiA4Ny0xMTNsMS0xelwiXG4gICAgfSxcbiAgICBibG9ja3F1b3RlOiB7XG4gICAgICAgIHdpZHRoOiA2NDAsIGhlaWdodDogODk2LFxuICAgICAgICBwYXRoOiBcIk0wIDQ0OHYyNTZoMjU2di0yNTZoLTEyOGMwIDAgMC0xMjggMTI4LTEyOHYtMTI4YzAgMC0yNTYgMC0yNTYgMjU2ek02NDAgMzIwdi0xMjhjMCAwLTI1NiAwLTI1NiAyNTZ2MjU2aDI1NnYtMjU2aC0xMjhjMCAwIDAtMTI4IDEyOC0xMjh6XCJcbiAgICB9XG59O1xuLyoqXG5NZW51IGl0ZW0gZm9yIHRoZSBgam9pblVwYCBjb21tYW5kLlxuKi9cbmNvbnN0IGpvaW5VcEl0ZW0gPSBuZXcgTWVudUl0ZW0oe1xuICAgIHRpdGxlOiBcIkpvaW4gd2l0aCBhYm92ZSBibG9ja1wiLFxuICAgIHJ1bjogam9pblVwLFxuICAgIHNlbGVjdDogc3RhdGUgPT4gam9pblVwKHN0YXRlKSxcbiAgICBpY29uOiBpY29ucy5qb2luXG59KTtcbi8qKlxuTWVudSBpdGVtIGZvciB0aGUgYGxpZnRgIGNvbW1hbmQuXG4qL1xuY29uc3QgbGlmdEl0ZW0gPSBuZXcgTWVudUl0ZW0oe1xuICAgIHRpdGxlOiBcIkxpZnQgb3V0IG9mIGVuY2xvc2luZyBibG9ja1wiLFxuICAgIHJ1bjogbGlmdCxcbiAgICBzZWxlY3Q6IHN0YXRlID0+IGxpZnQoc3RhdGUpLFxuICAgIGljb246IGljb25zLmxpZnRcbn0pO1xuLyoqXG5NZW51IGl0ZW0gZm9yIHRoZSBgc2VsZWN0UGFyZW50Tm9kZWAgY29tbWFuZC5cbiovXG5jb25zdCBzZWxlY3RQYXJlbnROb2RlSXRlbSA9IG5ldyBNZW51SXRlbSh7XG4gICAgdGl0bGU6IFwiU2VsZWN0IHBhcmVudCBub2RlXCIsXG4gICAgcnVuOiBzZWxlY3RQYXJlbnROb2RlLFxuICAgIHNlbGVjdDogc3RhdGUgPT4gc2VsZWN0UGFyZW50Tm9kZShzdGF0ZSksXG4gICAgaWNvbjogaWNvbnMuc2VsZWN0UGFyZW50Tm9kZVxufSk7XG4vKipcbk1lbnUgaXRlbSBmb3IgdGhlIGB1bmRvYCBjb21tYW5kLlxuKi9cbmxldCB1bmRvSXRlbSA9IG5ldyBNZW51SXRlbSh7XG4gICAgdGl0bGU6IFwiVW5kbyBsYXN0IGNoYW5nZVwiLFxuICAgIHJ1bjogdW5kbyxcbiAgICBlbmFibGU6IHN0YXRlID0+IHVuZG8oc3RhdGUpLFxuICAgIGljb246IGljb25zLnVuZG9cbn0pO1xuLyoqXG5NZW51IGl0ZW0gZm9yIHRoZSBgcmVkb2AgY29tbWFuZC5cbiovXG5sZXQgcmVkb0l0ZW0gPSBuZXcgTWVudUl0ZW0oe1xuICAgIHRpdGxlOiBcIlJlZG8gbGFzdCB1bmRvbmUgY2hhbmdlXCIsXG4gICAgcnVuOiByZWRvLFxuICAgIGVuYWJsZTogc3RhdGUgPT4gcmVkbyhzdGF0ZSksXG4gICAgaWNvbjogaWNvbnMucmVkb1xufSk7XG4vKipcbkJ1aWxkIGEgbWVudSBpdGVtIGZvciB3cmFwcGluZyB0aGUgc2VsZWN0aW9uIGluIGEgZ2l2ZW4gbm9kZSB0eXBlLlxuQWRkcyBgcnVuYCBhbmQgYHNlbGVjdGAgcHJvcGVydGllcyB0byB0aGUgb25lcyBwcmVzZW50IGluXG5gb3B0aW9uc2AuIGBvcHRpb25zLmF0dHJzYCBtYXkgYmUgYW4gb2JqZWN0IHRoYXQgcHJvdmlkZXNcbmF0dHJpYnV0ZXMgZm9yIHRoZSB3cmFwcGluZyBub2RlLlxuKi9cbmZ1bmN0aW9uIHdyYXBJdGVtKG5vZGVUeXBlLCBvcHRpb25zKSB7XG4gICAgbGV0IHBhc3NlZE9wdGlvbnMgPSB7XG4gICAgICAgIHJ1bihzdGF0ZSwgZGlzcGF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwSW4obm9kZVR5cGUsIG9wdGlvbnMuYXR0cnMpKHN0YXRlLCBkaXNwYXRjaCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdChzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHdyYXBJbihub2RlVHlwZSwgb3B0aW9ucy5hdHRycykoc3RhdGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmb3IgKGxldCBwcm9wIGluIG9wdGlvbnMpXG4gICAgICAgIHBhc3NlZE9wdGlvbnNbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuICAgIHJldHVybiBuZXcgTWVudUl0ZW0ocGFzc2VkT3B0aW9ucyk7XG59XG4vKipcbkJ1aWxkIGEgbWVudSBpdGVtIGZvciBjaGFuZ2luZyB0aGUgdHlwZSBvZiB0aGUgdGV4dGJsb2NrIGFyb3VuZCB0aGVcbnNlbGVjdGlvbiB0byB0aGUgZ2l2ZW4gdHlwZS4gUHJvdmlkZXMgYHJ1bmAsIGBhY3RpdmVgLCBhbmQgYHNlbGVjdGBcbnByb3BlcnRpZXMuIE90aGVycyBtdXN0IGJlIGdpdmVuIGluIGBvcHRpb25zYC4gYG9wdGlvbnMuYXR0cnNgIG1heVxuYmUgYW4gb2JqZWN0IHRvIHByb3ZpZGUgdGhlIGF0dHJpYnV0ZXMgZm9yIHRoZSB0ZXh0YmxvY2sgbm9kZS5cbiovXG5mdW5jdGlvbiBibG9ja1R5cGVJdGVtKG5vZGVUeXBlLCBvcHRpb25zKSB7XG4gICAgbGV0IGNvbW1hbmQgPSBzZXRCbG9ja1R5cGUobm9kZVR5cGUsIG9wdGlvbnMuYXR0cnMpO1xuICAgIGxldCBwYXNzZWRPcHRpb25zID0ge1xuICAgICAgICBydW46IGNvbW1hbmQsXG4gICAgICAgIGVuYWJsZShzdGF0ZSkgeyByZXR1cm4gY29tbWFuZChzdGF0ZSk7IH0sXG4gICAgICAgIGFjdGl2ZShzdGF0ZSkge1xuICAgICAgICAgICAgbGV0IHsgJGZyb20sIHRvLCBub2RlIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgICAgICBpZiAobm9kZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5oYXNNYXJrdXAobm9kZVR5cGUsIG9wdGlvbnMuYXR0cnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRvIDw9ICRmcm9tLmVuZCgpICYmICRmcm9tLnBhcmVudC5oYXNNYXJrdXAobm9kZVR5cGUsIG9wdGlvbnMuYXR0cnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmb3IgKGxldCBwcm9wIGluIG9wdGlvbnMpXG4gICAgICAgIHBhc3NlZE9wdGlvbnNbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuICAgIHJldHVybiBuZXcgTWVudUl0ZW0ocGFzc2VkT3B0aW9ucyk7XG59XG4vLyBXb3JrIGFyb3VuZCBjbGFzc0xpc3QudG9nZ2xlIGJlaW5nIGJyb2tlbiBpbiBJRTExXG5mdW5jdGlvbiBzZXRDbGFzcyhkb20sIGNscywgb24pIHtcbiAgICBpZiAob24pXG4gICAgICAgIGRvbS5jbGFzc0xpc3QuYWRkKGNscyk7XG4gICAgZWxzZVxuICAgICAgICBkb20uY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xufVxuXG5jb25zdCBwcmVmaXggPSBcIlByb3NlTWlycm9yLW1lbnViYXJcIjtcbmZ1bmN0aW9uIGlzSU9TKCkge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgYWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIHJldHVybiAhL0VkZ2VcXC9cXGQvLnRlc3QoYWdlbnQpICYmIC9BcHBsZVdlYktpdC8udGVzdChhZ2VudCkgJiYgL01vYmlsZVxcL1xcdysvLnRlc3QoYWdlbnQpO1xufVxuLyoqXG5BIHBsdWdpbiB0aGF0IHdpbGwgcGxhY2UgYSBtZW51IGJhciBhYm92ZSB0aGUgZWRpdG9yLiBOb3RlIHRoYXRcbnRoaXMgaW52b2x2ZXMgd3JhcHBpbmcgdGhlIGVkaXRvciBpbiBhbiBhZGRpdGlvbmFsIGA8ZGl2PmAuXG4qL1xuZnVuY3Rpb24gbWVudUJhcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBQbHVnaW4oe1xuICAgICAgICB2aWV3KGVkaXRvclZpZXcpIHsgcmV0dXJuIG5ldyBNZW51QmFyVmlldyhlZGl0b3JWaWV3LCBvcHRpb25zKTsgfVxuICAgIH0pO1xufVxuY2xhc3MgTWVudUJhclZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGVkaXRvclZpZXcsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5lZGl0b3JWaWV3ID0gZWRpdG9yVmlldztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5zcGFjZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm1heEhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMud2lkdGhGb3JNYXhIZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmZsb2F0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9IG51bGw7XG4gICAgICAgIHRoaXMucm9vdCA9IGVkaXRvclZpZXcucm9vdDtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gY3JlbChcImRpdlwiLCB7IGNsYXNzOiBwcmVmaXggKyBcIi13cmFwcGVyXCIgfSk7XG4gICAgICAgIHRoaXMubWVudSA9IHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZChjcmVsKFwiZGl2XCIsIHsgY2xhc3M6IHByZWZpeCB9KSk7XG4gICAgICAgIHRoaXMubWVudS5jbGFzc05hbWUgPSBwcmVmaXg7XG4gICAgICAgIGlmIChlZGl0b3JWaWV3LmRvbS5wYXJlbnROb2RlKVxuICAgICAgICAgICAgZWRpdG9yVmlldy5kb20ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy53cmFwcGVyLCBlZGl0b3JWaWV3LmRvbSk7XG4gICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZChlZGl0b3JWaWV3LmRvbSk7XG4gICAgICAgIGxldCB7IGRvbSwgdXBkYXRlIH0gPSByZW5kZXJHcm91cGVkKHRoaXMuZWRpdG9yVmlldywgdGhpcy5vcHRpb25zLmNvbnRlbnQpO1xuICAgICAgICB0aGlzLmNvbnRlbnRVcGRhdGUgPSB1cGRhdGU7XG4gICAgICAgIHRoaXMubWVudS5hcHBlbmRDaGlsZChkb20pO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICBpZiAob3B0aW9ucy5mbG9hdGluZyAmJiAhaXNJT1MoKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGbG9hdCgpO1xuICAgICAgICAgICAgbGV0IHBvdGVudGlhbFNjcm9sbGVycyA9IGdldEFsbFdyYXBwaW5nKHRoaXMud3JhcHBlcik7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByb290ID0gdGhpcy5lZGl0b3JWaWV3LnJvb3Q7XG4gICAgICAgICAgICAgICAgaWYgKCEocm9vdC5ib2R5IHx8IHJvb3QpLmNvbnRhaW5zKHRoaXMud3JhcHBlcikpXG4gICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbFNjcm9sbGVycy5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5zY3JvbGxIYW5kbGVyKSk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZsb2F0KGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCA/IGUudGFyZ2V0IDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwb3RlbnRpYWxTY3JvbGxlcnMuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmVkaXRvclZpZXcucm9vdCAhPSB0aGlzLnJvb3QpIHtcbiAgICAgICAgICAgIGxldCB7IGRvbSwgdXBkYXRlIH0gPSByZW5kZXJHcm91cGVkKHRoaXMuZWRpdG9yVmlldywgdGhpcy5vcHRpb25zLmNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50VXBkYXRlID0gdXBkYXRlO1xuICAgICAgICAgICAgdGhpcy5tZW51LnJlcGxhY2VDaGlsZChkb20sIHRoaXMubWVudS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHRoaXMuZWRpdG9yVmlldy5yb290O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGVudFVwZGF0ZSh0aGlzLmVkaXRvclZpZXcuc3RhdGUpO1xuICAgICAgICBpZiAodGhpcy5mbG9hdGluZykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxDdXJzb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbnUub2Zmc2V0V2lkdGggIT0gdGhpcy53aWR0aEZvck1heEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRoaXMud2lkdGhGb3JNYXhIZWlnaHQgPSB0aGlzLm1lbnUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWVudS5vZmZzZXRIZWlnaHQgPiB0aGlzLm1heEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gdGhpcy5tZW51Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUuc3R5bGUubWluSGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlU2Nyb2xsQ3Vyc29yKCkge1xuICAgICAgICBsZXQgc2VsZWN0aW9uID0gdGhpcy5lZGl0b3JWaWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmICghc2VsZWN0aW9uLmZvY3VzTm9kZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHJlY3RzID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCkuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgICAgbGV0IHNlbFJlY3QgPSByZWN0c1tzZWxlY3Rpb25Jc0ludmVydGVkKHNlbGVjdGlvbikgPyAwIDogcmVjdHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmICghc2VsUmVjdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IG1lbnVSZWN0ID0gdGhpcy5tZW51LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoc2VsUmVjdC50b3AgPCBtZW51UmVjdC5ib3R0b20gJiYgc2VsUmVjdC5ib3R0b20gPiBtZW51UmVjdC50b3ApIHtcbiAgICAgICAgICAgIGxldCBzY3JvbGxhYmxlID0gZmluZFdyYXBwaW5nU2Nyb2xsYWJsZSh0aGlzLndyYXBwZXIpO1xuICAgICAgICAgICAgaWYgKHNjcm9sbGFibGUpXG4gICAgICAgICAgICAgICAgc2Nyb2xsYWJsZS5zY3JvbGxUb3AgLT0gKG1lbnVSZWN0LmJvdHRvbSAtIHNlbFJlY3QudG9wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVGbG9hdChzY3JvbGxBbmNlc3Rvcikge1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy53cmFwcGVyLCBlZGl0b3JSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB0b3AgPSBzY3JvbGxBbmNlc3RvciA/IE1hdGgubWF4KDAsIHNjcm9sbEFuY2VzdG9yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkgOiAwO1xuICAgICAgICBpZiAodGhpcy5mbG9hdGluZykge1xuICAgICAgICAgICAgaWYgKGVkaXRvclJlY3QudG9wID49IHRvcCB8fCBlZGl0b3JSZWN0LmJvdHRvbSA8IHRoaXMubWVudS5vZmZzZXRIZWlnaHQgKyAxMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUuc3R5bGUucG9zaXRpb24gPSB0aGlzLm1lbnUuc3R5bGUubGVmdCA9IHRoaXMubWVudS5zdHlsZS50b3AgPSB0aGlzLm1lbnUuc3R5bGUud2lkdGggPSBcIlwiO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnNwYWNlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3BhY2VyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNwYWNlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgYm9yZGVyID0gKHBhcmVudC5vZmZzZXRXaWR0aCAtIHBhcmVudC5jbGllbnRXaWR0aCkgLyAyO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudS5zdHlsZS5sZWZ0ID0gKGVkaXRvclJlY3QubGVmdCArIGJvcmRlcikgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51LnN0eWxlLmRpc3BsYXkgPSBlZGl0b3JSZWN0LnRvcCA+ICh0aGlzLmVkaXRvclZpZXcuZG9tLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93KS5pbm5lckhlaWdodFxuICAgICAgICAgICAgICAgICAgICA/IFwibm9uZVwiIDogXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsQW5jZXN0b3IpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVudS5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZWRpdG9yUmVjdC50b3AgPCB0b3AgJiYgZWRpdG9yUmVjdC5ib3R0b20gPj0gdGhpcy5tZW51Lm9mZnNldEhlaWdodCArIDEwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbG9hdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IG1lbnVSZWN0ID0gdGhpcy5tZW51LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudS5zdHlsZS5sZWZ0ID0gbWVudVJlY3QubGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUuc3R5bGUud2lkdGggPSBtZW51UmVjdC53aWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsQW5jZXN0b3IpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVudS5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51LnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuc3BhY2VyID0gY3JlbChcImRpdlwiLCB7IGNsYXNzOiBwcmVmaXggKyBcIi1zcGFjZXJcIiwgc3R5bGU6IGBoZWlnaHQ6ICR7bWVudVJlY3QuaGVpZ2h0fXB4YCB9KTtcbiAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuc3BhY2VyLCB0aGlzLm1lbnUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLndyYXBwZXIucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLmVkaXRvclZpZXcuZG9tLCB0aGlzLndyYXBwZXIpO1xuICAgIH1cbn1cbi8vIE5vdCBwcmVjaXNlLCBidXQgY2xvc2UgZW5vdWdoXG5mdW5jdGlvbiBzZWxlY3Rpb25Jc0ludmVydGVkKHNlbGVjdGlvbikge1xuICAgIGlmIChzZWxlY3Rpb24uYW5jaG9yTm9kZSA9PSBzZWxlY3Rpb24uZm9jdXNOb2RlKVxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uLmFuY2hvck9mZnNldCA+IHNlbGVjdGlvbi5mb2N1c09mZnNldDtcbiAgICByZXR1cm4gc2VsZWN0aW9uLmFuY2hvck5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oc2VsZWN0aW9uLmZvY3VzTm9kZSkgPT0gTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkc7XG59XG5mdW5jdGlvbiBmaW5kV3JhcHBpbmdTY3JvbGxhYmxlKG5vZGUpIHtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlLnBhcmVudE5vZGU7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUpXG4gICAgICAgIGlmIChjdXIuc2Nyb2xsSGVpZ2h0ID4gY3VyLmNsaWVudEhlaWdodClcbiAgICAgICAgICAgIHJldHVybiBjdXI7XG59XG5mdW5jdGlvbiBnZXRBbGxXcmFwcGluZyhub2RlKSB7XG4gICAgbGV0IHJlcyA9IFtub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93XTtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlLnBhcmVudE5vZGU7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUpXG4gICAgICAgIHJlcy5wdXNoKGN1cik7XG4gICAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IHsgRHJvcGRvd24sIERyb3Bkb3duU3VibWVudSwgTWVudUl0ZW0sIGJsb2NrVHlwZUl0ZW0sIGljb25zLCBqb2luVXBJdGVtLCBsaWZ0SXRlbSwgbWVudUJhciwgcmVkb0l0ZW0sIHJlbmRlckdyb3VwZWQsIHNlbGVjdFBhcmVudE5vZGVJdGVtLCB1bmRvSXRlbSwgd3JhcEl0ZW0gfTtcbiJdLCJuYW1lcyI6WyJjcmVsIiwiam9pblVwIiwibGlmdCIsInNlbGVjdFBhcmVudE5vZGUiLCJzZXRCbG9ja1R5cGUiLCJ3cmFwSW4iLCJ1bmRvIiwicmVkbyIsIlBsdWdpbiIsIlNWRyIsIlhMSU5LIiwicHJlZml4JDIiLCJoYXNoUGF0aCIsInBhdGgiLCJoYXNoIiwiaSIsImxlbmd0aCIsImNoYXJDb2RlQXQiLCJnZXRJY29uIiwicm9vdCIsImljb24iLCJkb2MiLCJub2RlVHlwZSIsIm93bmVyRG9jdW1lbnQiLCJkb2N1bWVudCIsIm5vZGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwid2lkdGgiLCJoZWlnaHQiLCJuYW1lIiwidG9TdHJpbmciLCJnZXRFbGVtZW50QnlJZCIsImJ1aWxkU1ZHIiwic3ZnIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVFbGVtZW50TlMiLCJzdHlsZSIsInVzZSIsInNldEF0dHJpYnV0ZU5TIiwiZXhlYyIsImxvY2F0aW9uIiwiZG9tIiwiY2xvbmVOb2RlIiwidGV4dCIsImNzcyIsInRleHRDb250ZW50IiwiZmlyc3RDaGlsZCIsImNzc1RleHQiLCJkYXRhIiwidG9wIiwiYm9keSIsImNvbGxlY3Rpb24iLCJpZCIsImRpc3BsYXkiLCJpbnNlcnRCZWZvcmUiLCJzeW0iLCJzZXRBdHRyaWJ1dGUiLCJwcmVmaXgkMSIsIk1lbnVJdGVtIiwiY29uc3RydWN0b3IiLCJzcGVjIiwicmVuZGVyIiwidmlldyIsImxhYmVsIiwidHJhbnNsYXRlIiwiUmFuZ2VFcnJvciIsInRpdGxlIiwic3RhdGUiLCJjbGFzcyIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJjb250YWlucyIsInJ1biIsImRpc3BhdGNoIiwidXBkYXRlIiwic2VsZWN0Iiwic2VsZWN0ZWQiLCJlbmFibGVkIiwiZW5hYmxlIiwic2V0Q2xhc3MiLCJhY3RpdmUiLCJfcHJvcHMiLCJsYXN0TWVudUV2ZW50IiwidGltZSIsIm1hcmtNZW51RXZlbnQiLCJEYXRlIiwibm93IiwidGFyZ2V0IiwiaXNNZW51RXZlbnQiLCJ3cmFwcGVyIiwiRHJvcGRvd24iLCJjb250ZW50Iiwib3B0aW9ucyIsIkFycmF5IiwiaXNBcnJheSIsInJlbmRlckRyb3Bkb3duSXRlbXMiLCJ3aW4iLCJkZWZhdWx0VmlldyIsIndpbmRvdyIsIndyYXAiLCJvcGVuIiwibGlzdGVuaW5nT25DbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV4cGFuZCIsImlubmVyIiwiaXRlbXMiLCJtZW51RE9NIiwiZG9uZSIsInJlbW92ZUNoaWxkIiwicmVuZGVyZWQiLCJ1cGRhdGVzIiwicHVzaCIsImNvbWJpbmVVcGRhdGVzIiwibm9kZXMiLCJzb21ldGhpbmciLCJ1cCIsIkRyb3Bkb3duU3VibWVudSIsInJlbW92ZSIsInJlbmRlckdyb3VwZWQiLCJyZXN1bHQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwic2VwYXJhdG9ycyIsImxvY2FsVXBkYXRlcyIsImxvY2FsTm9kZXMiLCJqIiwic3BhbiIsInNlcGFyYXRvciIsIm5lZWRTZXAiLCJoYXNDb250ZW50IiwiaWNvbnMiLCJqb2luIiwic3Ryb25nIiwiZW0iLCJjb2RlIiwibGluayIsImJ1bGxldExpc3QiLCJvcmRlcmVkTGlzdCIsImJsb2NrcXVvdGUiLCJqb2luVXBJdGVtIiwibGlmdEl0ZW0iLCJzZWxlY3RQYXJlbnROb2RlSXRlbSIsInVuZG9JdGVtIiwicmVkb0l0ZW0iLCJ3cmFwSXRlbSIsInBhc3NlZE9wdGlvbnMiLCJhdHRycyIsInByb3AiLCJibG9ja1R5cGVJdGVtIiwiY29tbWFuZCIsIiRmcm9tIiwidG8iLCJzZWxlY3Rpb24iLCJoYXNNYXJrdXAiLCJlbmQiLCJwYXJlbnQiLCJjbHMiLCJvbiIsInByZWZpeCIsImlzSU9TIiwibmF2aWdhdG9yIiwiYWdlbnQiLCJ1c2VyQWdlbnQiLCJ0ZXN0IiwibWVudUJhciIsImVkaXRvclZpZXciLCJNZW51QmFyVmlldyIsInNwYWNlciIsIm1heEhlaWdodCIsIndpZHRoRm9yTWF4SGVpZ2h0IiwiZmxvYXRpbmciLCJzY3JvbGxIYW5kbGVyIiwibWVudSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJjb250ZW50VXBkYXRlIiwidXBkYXRlRmxvYXQiLCJwb3RlbnRpYWxTY3JvbGxlcnMiLCJnZXRBbGxXcmFwcGluZyIsImZvckVhY2giLCJlbCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVuZGVmaW5lZCIsInVwZGF0ZVNjcm9sbEN1cnNvciIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwibWluSGVpZ2h0IiwiZ2V0U2VsZWN0aW9uIiwiZm9jdXNOb2RlIiwicmVjdHMiLCJnZXRSYW5nZUF0IiwiZ2V0Q2xpZW50UmVjdHMiLCJzZWxSZWN0Iiwic2VsZWN0aW9uSXNJbnZlcnRlZCIsIm1lbnVSZWN0IiwiYm90dG9tIiwic2Nyb2xsYWJsZSIsImZpbmRXcmFwcGluZ1Njcm9sbGFibGUiLCJzY3JvbGxUb3AiLCJzY3JvbGxBbmNlc3RvciIsImVkaXRvclJlY3QiLCJNYXRoIiwibWF4IiwicG9zaXRpb24iLCJsZWZ0IiwiYm9yZGVyIiwiY2xpZW50V2lkdGgiLCJpbm5lckhlaWdodCIsImRlc3Ryb3kiLCJhbmNob3JOb2RlIiwiYW5jaG9yT2Zmc2V0IiwiZm9jdXNPZmZzZXQiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsIk5vZGUiLCJET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkciLCJjdXIiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJyZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/prosemirror-menu@1.2.5/node_modules/prosemirror-menu/dist/index.js\n");

/***/ })

};
;